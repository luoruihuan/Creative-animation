function handleKeyboard(e){e.originalEvent&&(e=e.originalEvent);var t=e.keyCode||e.charCode;if(!s.params.allowSwipeToNext&&(isH()&&t===39||!isH()&&t===40))return!1;if(!s.params.allowSwipeToPrev&&(isH()&&t===37||!isH()&&t===38))return!1;if(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)return;if(document.activeElement&&document.activeElement.nodeName&&(document.activeElement.nodeName.toLowerCase()==="input"||document.activeElement.nodeName.toLowerCase()==="textarea"))return;if(t===37||t===39||t===38||t===40){var n=!1;if(s.container.parents(".swiper-slide").length>0&&s.container.parents(".swiper-slide-active").length===0)return;var r={left:window.pageXOffset,top:window.pageYOffset},i=window.innerWidth,o=window.innerHeight,u=s.container.offset();s.rtl&&(u.left=u.left-s.container[0].scrollLeft);var a=[[u.left,u.top],[u.left+s.width,u.top],[u.left,u.top+s.height],[u.left+s.width,u.top+s.height]];for(var f=0;f<a.length;f++){var l=a[f];l[0]>=r.left&&l[0]<=r.left+i&&l[1]>=r.top&&l[1]<=r.top+o&&(n=!0)}if(!n)return}if(isH()){if(t===37||t===39)e.preventDefault?e.preventDefault():e.returnValue=!1;(t===39&&!s.rtl||t===37&&s.rtl)&&s.slideNext(),(t===37&&!s.rtl||t===39&&s.rtl)&&s.slidePrev()}else{if(t===38||t===40)e.preventDefault?e.preventDefault():e.returnValue=!1;t===40&&s.slideNext(),t===38&&s.slidePrev()}}s.disableKeyboardControl=function(){$(document).off("keydown",handleKeyboard)},s.enableKeyboardControl=function(){$(document).on("keydown",handleKeyboard)};