(function(){"use strict";function g(e,t,n){var r="        ",i=e.path.split("src/js/")[1];["wrap-start.js","wrap-start-umd.js","wrap-end.js","wrap-end-umd.js","amd.js"].indexOf(i)!==-1&&(r="");if(i==="swiper-intro.js"||i==="swiper-intro-f7.js"||i==="swiper-outro.js"||i==="dom.js"||i==="get-dom-lib.js"||i==="get-jquery.js"||i==="dom-plugins.js"||i==="swiper-proto.js")r="    ";n&&(r=r.substring(4));if(r!==""){var s=d.readFileSync(e.path).toString().split("\n"),o="";for(var u=0;u<s.length;u++)o+=r+s[u]+(u===s.length?"":"\n");e.contents=new Buffer(o)}}var e=require("gulp"),t=require("gulp-connect"),n=require("gulp-open"),r=require("gulp-less"),i=require("gulp-rename"),s=require("gulp-header"),o=require("path"),u=require("gulp-uglify"),a=require("gulp-sourcemaps"),f=require("gulp-minify-css"),l=require("gulp-tap"),c=require("gulp-concat"),h=require("gulp-jshint"),p=require("jshint-stylish"),d=require("fs"),v={root:"./",build:{root:"build/",styles:"build/css/",scripts:"build/js/"},dist:{root:"dist/",styles:"dist/css/",scripts:"dist/js/"},playground:{root:"playground/"},source:{root:"src/",styles:"src/less/",scripts:"src/js/*.js"}},m={filename:"swiper",jsFiles:["src/js/wrap-start.js","src/js/swiper-intro.js","src/js/core.js","src/js/effects.js","src/js/lazy-load.js","src/js/scrollbar.js","src/js/controller.js","src/js/hashnav.js","src/js/keyboard.js","src/js/mousewheel.js","src/js/parallax.js","src/js/plugins.js","src/js/emitter.js","src/js/a11y.js","src/js/init.js","src/js/swiper-outro.js","src/js/swiper-proto.js","src/js/dom.js","src/js/get-dom-lib.js","src/js/dom-plugins.js","src/js/wrap-end.js","src/js/amd.js"],jQueryFiles:["src/js/wrap-start.js","src/js/swiper-intro.js","src/js/core.js","src/js/effects.js","src/js/lazy-load.js","src/js/scrollbar.js","src/js/controller.js","src/js/hashnav.js","src/js/keyboard.js","src/js/mousewheel.js","src/js/parallax.js","src/js/plugins.js","src/js/emitter.js","src/js/a11y.js","src/js/init.js","src/js/swiper-outro.js","src/js/swiper-proto.js","src/js/get-dom-lib.js","src/js/dom-plugins.js","src/js/wrap-end.js","src/js/amd.js"],jQueryUMDFiles:["src/js/wrap-start-umd.js","src/js/swiper-intro.js","src/js/core.js","src/js/effects.js","src/js/lazy-load.js","src/js/scrollbar.js","src/js/controller.js","src/js/hashnav.js","src/js/keyboard.js","src/js/mousewheel.js","src/js/parallax.js","src/js/plugins.js","src/js/emitter.js","src/js/a11y.js","src/js/init.js","src/js/swiper-outro.js","src/js/swiper-proto.js","src/js/get-jquery.js","src/js/dom-plugins.js","src/js/wrap-end-umd.js"],Framework7Files:["src/js/swiper-intro-f7.js","src/js/core.js","src/js/effects.js","src/js/lazy-load.js","src/js/scrollbar.js","src/js/controller.js","src/js/parallax.js","src/js/plugins.js","src/js/emitter.js","src/js/a11y.js","src/js/init.js","src/js/swiper-outro.js","src/js/swiper-proto.js"],pkg:require("./bower.json"),banner:["/**"," * Swiper <%= pkg.version %>"," * <%= pkg.description %>"," * "," * <%= pkg.homepage %>"," * "," * Copyright <%= date.year %>, <%= pkg.author %>"," * The iDangero.us"," * http://www.idangero.us/"," * ",' * Licensed under <%= pkg.license.join(" & ") %>'," * "," * Released on: <%= date.month %> <%= date.day %>, <%= date.year %>"," */",""].join("\n"),date:{year:(new Date).getFullYear(),month:"January February March April May June July August September October November December".split(" ")[(new Date).getMonth()],day:(new Date).getDate()}};e.task("scripts",function(n){e.src(m.jsFiles).pipe(l(function(e,t){g(e,t)})).pipe(c(m.filename+".js")).pipe(s(m.banner,{pkg:m.pkg,date:m.date})).pipe(e.dest(v.build.scripts)).pipe(h()).pipe(h.reporter(p)),e.src(m.jQueryFiles).pipe(l(function(e,t){g(e,t)})).pipe(c(m.filename+".jquery.js")).pipe(s(m.banner,{pkg:m.pkg,date:m.date})).pipe(e.dest(v.build.scripts)),e.src(m.jQueryUMDFiles).pipe(l(function(e,t){g(e,t)})).pipe(c(m.filename+".jquery.umd.js")).pipe(s(m.banner,{pkg:m.pkg,date:m.date})).pipe(e.dest(v.build.scripts)),e.src(m.Framework7Files).pipe(l(function(e,t){g(e,t,!0)})).pipe(c(m.filename+".framework7.js")).pipe(s(m.banner,{pkg:m.pkg,date:m.date})).pipe(e.dest(v.build.scripts)).pipe(t.reload()),n()}),e.task("styles",function(n){e.src(v.source.styles+"swiper.less").pipe(r({paths:[o.join(__dirname,"less","includes")]})).pipe(s(m.banner,{pkg:m.pkg,date:m.date})).pipe(i(function(e){e.basename=m.filename})).pipe(e.dest(v.build.styles)).pipe(t.reload()),e.src([v.source.styles+"core.less",v.source.styles+"navigation-f7.less",v.source.styles+"effects.less",v.source.styles+"scrollbar.less",v.source.styles+"preloader-f7.less"]).pipe(c(m.filename+".framework7.less")).pipe(s("/* === Swiper === */\n")).pipe(e.dest(v.build.styles)),n()}),e.task("build",["scripts","styles"],function(e){e()}),e.task("dist",function(){e.src([v.build.scripts+m.filename+".js"]).pipe(e.dest(v.dist.scripts)).pipe(a.init()).pipe(u()).pipe(s(m.banner,{pkg:m.pkg,date:m.date})).pipe(i(function(e){e.basename=m.filename+".min"})).pipe(a.write("./maps")).pipe(e.dest(v.dist.scripts)),e.src([v.build.scripts+m.filename+".jquery.js"]).pipe(e.dest(v.dist.scripts)).pipe(a.init()).pipe(u()).pipe(s(m.banner,{pkg:m.pkg,date:m.date})).pipe(i(function(e){e.basename=m.filename+".jquery.min"})).pipe(a.write("./maps")).pipe(e.dest(v.dist.scripts)),e.src([v.build.scripts+m.filename+".jquery.umd.js"]).pipe(e.dest(v.dist.scripts)).pipe(a.init()).pipe(u()).pipe(s(m.banner,{pkg:m.pkg,date:m.date})).pipe(i(function(e){e.basename=m.filename+".jquery.umd.min"})).pipe(a.write("./maps")).pipe(e.dest(v.dist.scripts)),e.src(v.build.styles+"*.css").pipe(e.dest(v.dist.styles)).pipe(f({advanced:!1,aggressiveMerging:!1})).pipe(s(m.banner,{pkg:m.pkg,date:m.date})).pipe(i(function(e){e.basename=m.filename+".min"})).pipe(e.dest(v.dist.styles))}),e.task("watch",function(){e.watch(v.source.scripts,["scripts"]),e.watch(v.source.styles+"*.less",["styles"])}),e.task("connect",function(){return t.server({root:[v.root],livereload:!0,port:"3000"})}),e.task("open",function(){return e.src(v.playground.root+"index.html").pipe(n({uri:"http://localhost:3000/"+v.playground.root+"index.html"}))}),e.task("server",["watch","connect","open"]),e.task("default",["server"])})();